
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!-- START:stylesheet
-->

  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/stylesheets/labarchive.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/jquery-ui.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/themes/base/ui.all.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/chosen/chosen.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/media/css/jquery.dataTables_themeroller.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/TableTools/media/css/TableTools.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/ColVis/media/css/ColVis.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/jquery.calculator.package-1.3.2/jquery.calculator.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/freezerbox/jquery.freezerbox.css">
  <link rel="stylesheet" type="text/css" href="https://mynotebook.labarchives.com/javascripts/freezerbox/jquery.colorselect.css">
          <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/jquery-1.7.2.min.js"></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/jquery-ui-1.9.1.custom.min.js"></script>
                    <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/populate/jquery.populate.pack.js" defer="defer"></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/numeric/jquery.numeric.js" defer="defer"></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/jquery.calculator.package-1.3.2/jquery.calculator.js" defer="defer"></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/daepark-postmessage/postmessage.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/forms/widget_proxy.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/forms/parent_form_script.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/forms/database_form_script.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/media/js/jquery.dataTables.min.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/TableTools/media/js/TableTools.min.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/TableTools/media/js/ZeroClipboard.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/ColVis/media/js/ColVis.min.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/DataTables-1.9.3/extras/ColResize/ColReorderWithResize.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/chosen/chosen.jquery_modified.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/autoresize/jquery.autoresize.min.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/freezerbox/jquery.freezerbox.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/freezerbox/jquery.colorselect.js" ></script>
            <script type="text/javascript" src="https://mynotebook.labarchives.com/javascripts/freezerbox/freezerbox_form_script.js" ></script>
    
<title></title>
</head>
<body>
<script>
    // #region
var form_script = null;
try {
$(document).ready(function () {
      
      
      // Create window var to store the locale for the datepicker
      window.datepicker_locale = '';
//***************************************************************************
//***************************************************************************
//***************************************************************************
//place your javascript code below and when you have it the way you want it
//just paste it into the LA Dev tool
//***************************************************************************
//***************************************************************************
//***************************************************************************
// #endregion
    form_script = 
    my_widget_script =
{
    
    init: function (mode, json_data) {
        //this method is called when the form is being constructed
        // parameters
        // mode = if it equals 'view' than it should not be editable
        //        if it equals 'edit' then it will be used for entry
        //        if it equals 'view_dev' same as view,  does some additional checks that may slow things down in production
        //        if it equals 'edit_dev' same as edit,   does some additional checks that may slow things down in production

        // json_data will contain the data to populate the form with, it will be in the form of the data
        // returned from a call to to_json or empty if this is a new form.
        //By default it calls the parent_class's init.

        //uncomment to inspect and view code while developing
        //debugger;

        //Get the parsed JSON data
        var parsedJson = this.parseInitJson(json_data);

        //Uncomment to print parsedJson to console
        //console.log("init", parsedJson);

        //check parsedJson for info not contained in form inputs and reinitialize
        this.initDynamicContent(parsedJson);

        //resize the content box when the window size changes
        window.onresize = ()=> this.resize(); // need the arrow func, or "this" within resize becomes associated with event

        //Define behavior when buttons are clicked or checkboxes/selctions change
        this.addEventListeners();

        // Initialize the form with the stored widgetData using the parent_class.init() function
        this.parent_class.init(mode, () => JSON.stringify(parsedJson.widgetData));

        // Add * and # to mark required field indicators
        this.addRequiredFieldIndicators();

        // Set up the form based on previously entered form input
        this.setUpInitialState();

        //adjust form design and buttons based on mode
        this.adjustForMode(mode);

        // Print to console log if any elements don't have a required name attribute
        this.checkForNames();
    },
    
    to_json: function () {
        //should return a json string containing the data entered into the form by the user
        //whatever is return from the method is persisted in LabArchives.  must not be binary data.
        //called when the user hits the save button, when adding or editing an entry

        //Acquire input data from the form using the parent_class.to_json() function
        var widgetJsonString = this.parent_class.to_json();

        //Get information about any dynamic content that may have been created
        var dynamicContent = this.getDynamicContent();

        // Add widgetData and any additional dynamic content to an output object
        // Will be accessed within the init and from_json methods
        var output = { 
            widgetData: JSON.parse(widgetJsonString),
            abNums: this.abNums
        };

        //uncomment to check stringified output
        //console.log("to JSON", JSON.stringify(output));

        // return stringified output
        return JSON.stringify(output);
    },

    from_json: function (json_data) {
        //populates the form with json_data

        // all data in string format within json_data is parsed into an object parsedJson
        var parsedJson = JSON.parse(json_data);

        //use parsedJson to get widgetData and turn into a string
        //parent class uses the widget data to fill in inputs
        this.parent_class.from_json(JSON.stringify(parsedJson.widgetData));
    },

    /**
     * In preview, the form is populated with test data when the
     * parent_class.test_data() function is called. This randomly selects options for 
     * dropdown select menus, radio buttons, and checkboxes.
     */
    test_data: function () {
        //during development this method is called to populate your form while in preview mode

        // ORIGINAL LABARCHIVES RETURN FOR TEST DATA
        //return this.parent_class.test_data();

        // CUSTOM TEST DATA

        //store the outcome of the the test data within the testData variable
        var testData = JSON.parse(this.parent_class.test_data());

        //If no additional dynamic content 
        var output = { widgetData: testData };

        //Add additional content to match the objects in to_json
        //var output = { widgetData: testData, addedRows: 2 }; //When in development, initialize with 2 addedRows

        //return the stringified output for use by the init function
        return JSON.stringify(output);
    },

    /**
     * This function determines whether or not the user is allowed to save the widget to the page
     * 
     * The original LabArchives function checks for fields that have _mandatory appended to the name attribute
     * 
     * The custom function checks for fields with the required attribute. If any of these fields are blank, 
     * an alert is returns that provides a fail log with the ids of the elements that are missing. If there are
     * no blank required fields, an empty array is returned.
     * 
     * source: https://stackoverflow.com/questions/18495310/checking-if-an-input-field-is-required-using-jquery
     */
     is_valid: function (b_suppress_message) {
        //called when the user hits the save button, to allow for form validation.
        //returns an array of dom elements that are not valid - default is those elements marked as mandatory
        // that have no data in them.
        //You can modify this method, to highlight bad form elements etc...
        //LA calls this method with b_suppress_message and relies on your code to communicate issues to the user
        //Returning an empty array [] or NULL equals no error
        //TO DO write code specific to your form

        //ORIGINAL LABARCHIVES IS_VALID FUNCTION
        //return this.parent_class.is_valid(b_suppress_message);

        //CUSTOM FUNCTION TO CHECK REQUIRED ITEMS
        var fail = false; //begin with a fail variable that is false
        var fail_log = ''; //begin with an empty fail log
        var name; //create a name variable

        //search the_form for all elements that are of type select, textarea, or input
        $('#the_form').find('select, textarea, input').each((i, e)=> {
            if (!$(e).prop('required')) { //if this element does not have a required attribute
                //don't change anything (fail remains false)
            } else { //if there is a required attribute
                if (!$(e).val()) { //if there is not a value for this input
                    fail = true; //change fail to true
                    name = $(e).attr('id'); //replace the name variable with the name attribute of this element
                    fail_log += name + " is required \n"; //add to the fail log that this name is required
                }

            }
        });

        $("input[type='date']").each((i, e)=> {
            var date = $(e).val();
            if(date){
                var validDate = this.isValidDate(date);
                if(!validDate){
                    fail = true;
                    fail_log += "Please enter valid date in form 'YYYY-MM-DD'";
                }
            }
        });

        $("input[type='time']").each((i, e)=> {
            var time = $(e).val();
            if(time){
                var validtime = this.isValidTime(time);
                if(!validtime){
                    fail = true;
                    fail_log += "Please enter valid time in form 'hh:mm' - 24 hr time";
                }
            }
        });

        if (fail) { //if fail is true (meaning a required element didn't have a value)
            return bootbox.alert(fail_log); //return the fail log as an alert
        } else {
            var noErrors = [];
            return noErrors;
        } //otherwise, return empty array
    },

    is_edited: function () {
        //should return true if the form has been edited since it was loaded or since reset_edited was called
        return this.parent_class.is_edited();
    },

    reset_edited: function () {
        //typically called have a save
        //TO DO write code specific to your form
        return this.parent_class.reset_edited();
    },

    // ********************** CUSTOM METHODS USED BY INIT METHOD **********************
    parseInitJson: function (json_data) {
        var jsonString;
        //check if string or function because preview test is function and page is string
        if (typeof json_data === "string") {
            jsonString = json_data;
        } else {
            jsonString = json_data();
        }
        //Take input string into js object to be able to use elsewhere
        var parsedJson = JSON.parse(jsonString);
        return (parsedJson);
    },

    /**
     * TO DO: edit this function to reinitialize any dynamic content that is not explicity
     * defined within the HTML code. 
     * 
     * This function requires the parsedJson object.
     */
    initDynamicContent: function (parsedJson) {
        if(parsedJson.abNums){
            // console.log("initDynamic: abNums", parsedJson.abNums);
            for(var i = 0; i < parsedJson.abNums.length; i++){
                var abNum = parsedJson.abNums[i];
                this.addAntibodies(abNum);
            }
        }
    },

    /**
     * TO DO: edit this function to define how the HTML elements should be adjusted
     * based on the current mode.
     * 
     * Here, a subset of buttons are disabled when the widget is not being edited.
     * There may be other elements that should be shown/hidden based on the mode
     */
    adjustForMode: function (mode) {
        if (mode !== "edit" && mode !== "edit_dev") {
            //disable when not editing
            $(".disableOnView").prop("disabled", true);
            $("input[type='date']").removeClass(".hasDatePicker");
            $(".hideView").hide();
        } else {
            $("input[type='date']").each((i, e)=> {
                this.checkDateFormat($(e));
            });
            
            $("input[type='time']").each((i, e)=> {
                this.checkTimeFormat($(e));
            });
        }
    },

    /**
     * TO DO: edit this function to define behavior when the user interacts with the form.
     * This could include when buttons are clicked or when inputs change.
     */
    addEventListeners: function () {
        
    },

    /**
     * TO DO: edit this function to define the symbols that should be added to the HTML
     * page based on whether or not a field is required to save the widget to the page
     * 
     * Here, the function adds a blue # before fields of the class "needForFormLab" and a 
     * red * before fields with the "requiredLab" property
     */
    addRequiredFieldIndicators: function () {
        $('.needForTableLab').each((i, e)=> { //find element with class "needForFormLab"
            //alert($(e).val());
            $(e).html("<span class='hideView' style='color:blue'>#</span>" + $(e).html()); //add # before
        });

        $('.requiredLab').each((i, e)=> { //find element with class "requiredLab"
            //alert($(e).val());
            $(e).html("<span class='hideView' style='color:red'>*</span>" + $(e).html()); //add # before
        });
    },

    isValidTime: function (timeString) {
        var regEx = "^(((([0-1][0-9])|(2[0-3])):[0-5][0-9]))$";
        if(!timeString.match(regEx)){
            return false;
        } else {
            return true;
        }
    },

    isTimeSupported: function () {
        // Check if browser has support for input type=time
        var input = document.createElement('input');
        input.setAttribute('type', 'time');
        var supported = true;
        if(input.type !== "time"){
            supported = false;
        }
        this.timeSupported = supported;
        input.remove();
        return (supported);
    },

    timeSupported: true,

    checkTimeFormat: function ($timeInput) {
        if(!this.timeSupported){ // if not supported
            $timeInput.next(".timeWarning").remove();
            var time = $timeInput.val();
            var isValid = this.isValidTime(time);
            if(!isValid){
                $timeInput.after('<div class="text-danger timeWarning">Enter time as "hh:mm" in 24-hr format</div>');
            }
            this.resize();
        }
    },

    isValidDate: function (dateString) {
        // https://stackoverflow.com/questions/18758772/how-do-i-validate-a-date-in-this-format-yyyy-mm-dd-using-jquery/18759013
        var regEx = /^\d{4}-\d{2}-\d{2}$/;
        if(!dateString.match(regEx)) return false;  // Invalid format
        var d = new Date(dateString);
        var dNum = d.getTime();
        if(!dNum && dNum !== 0) return false; // NaN value, Invalid date
        return d.toISOString().slice(0,10) === dateString;
    },

    isDateSupported: function () {
        // https://gomakethings.com/how-to-check-if-a-browser-supports-native-input-date-pickers/
        // Check if browser has support for input type=date
        var input = document.createElement('input');
        // var value = 'a';
        input.setAttribute('type', 'date');
        var supported = true;
        if(input.type !== "date"){
            supported = false;
        }
        this.dateSupported = supported;
        input.remove();
        return (supported);
    },

    dateSupported: true,

    checkDateFormat: function ($dateInput) {
        if(!this.dateSupported){ // if not supported
            $dateInput.next(".dateWarning").remove();
            var date = $dateInput.val();
            var isValid = this.isValidDate(date);
            if(!isValid){
                $dateInput.after('<div class="text-danger dateWarning">Enter date as "YYYY-MM-DD"</div>');
            }
            $dateInput.datepicker({dateFormat: "yy-mm-dd"})
            this.resize();
        }
    },

    /**
     * TO DO: edit this function to define how the form should be initilized based 
     * on the existing form values. This is particularly important for when the 
     * widget already has data entered, such as when saved to a page.
     */
    setUpInitialState: function () {
        this.isDateSupported();
        this.isTimeSupported();
        
        $("input[type='date']").prop("placeholder", "YYYY-MM-DD").on("change", (e)=> {
            this.checkDateFormat($(e.currentTarget));
        });
        
        $("input[type='time']").prop("placeholder", "hh:mm").on("change", (e)=> {
            this.checkTimeFormat($(e.target));
        });
        
        //Add classes to add bootstrap styles for left column in form
        $('.myLeftCol4').addClass("col-6 col-md-4 col-lg-3 text-right");
        // $('.myLeftCol5').addClass("col-6 col-md-4 col-lg-3 text-right");
        $('.myLeftCol').addClass("col-4 col-sm-5 col-md-4 col-lg-5 text-right");
        $('.myLeftCol2').addClass("col-6 col-sm-5 col-md-4 col-lg-5 text-right");
        $('.myLeftCol3').addClass("col-2 col-lg-1 text-right");

        $('textarea.autoAdjust').each((i,e)=> { // i is the index for each match, textArea is the object
            e.setAttribute('style', 'height:' + (e.scrollHeight) + 'px;overflow-y:hidden;');
        }).on('input', (e)=> {
            e.target.style.height = 'auto';
            e.target.style.height = (e.target.scrollHeight) + 'px';
            this.resize();
        });

        $(".watchTime").each((i,e)=> {
            var $elToWatch = $(e);
            var $elToFill = $(e).parent().next().find($(".fillTime"));
            // console.log($elToFill);

            this.watchTime($elToWatch, $elToFill);
        }).on("input", (e)=> {
            var $elToWatch = $(e.currentTarget);
            var $elToFill = $(e.currentTarget).parent().next().find($(".fillTime"));
            // console.log($elToFill);

            my_widget_script.watchTime($elToWatch, $elToFill);
        });

        // Toggle card when clicked
        $(".card-header").on("click", (e)=>{
            this.toggleCard($(e.currentTarget));
        });

        // When an amount of 1x PBS is changed, update the volume of 10x PBS to use
        $("#desiredPBSVol").on("change", (e)=>{
            var desiredFinalVol = $(e.currentTarget).val();
            var startVol = this.PBS10xTo1xCalc(desiredFinalVol);
            $("#vol10xPBS").text(startVol);
        }).each((i,e)=>{
            var desiredFinalVol = $(e).val();
            var startVol = this.PBS10xTo1xCalc(desiredFinalVol);
            $("#vol10xPBS").text(startVol);
        });

        // When an amount of blocking solution is changed, update the volumes of components
        $(".updateBlocking").on("change", (e)=>{
            var solns = this.blockingSolnCalc(); // updating within function now
        });

        $("#addAntibody").on("click", ()=>{
            this.addAntibodyClick();
        });

        $("#addCRHcFosABs").on("click", ()=>{
            this.addCRHcFosABsClick();
        });

        $("#desiredPrimaryVol").on("input", ()=>{
            this.primaryAbSolnCalc();
        });

        // Simple watch update
        $(".watch").each((i,e)=>{
            this.watchValue($(e));
        }).on("input", (e)=>{
            this.watchValue($(e.currentTarget));
        });

        this.blockingSolnCalc();
        this.primaryAbSolnCalc();
        this.resize();
    },

    /**
     * TO DO: edit this function to define which <div>s or other elements
     * should be adjusted based on the current width of the window
     */
    resize: function () {
        //resize the container
        this.parent_class.resize_container();
    },

    checkForNames: function() {
        $("input, select, textarea").each((i,e)=>{
            var hasName = $(e).attr("name");
            if(!hasName){
                console.log("There is no name attribute for: ", e.id);
            }
        })
    },
    // ********************** END CUSTOM INIT METHODS **********************


    // ********************** START CUSTOM TO_JSON METHODS **********************
    getDynamicContent: function () {
        var dynamicContent = {};
        return dynamicContent;
    },
    // ********************** END CUSTOM TO_JSON METHODS **********************

    /** -----------------------------------------------------------------------------
     * VALIDATE FORM ENTRY BEFORE COPYING OR SAVING TABLE TO CSV
     *
     * This function will check that elements with a class "needForTable"
     * are not blank. If there are blank elements, it will return false
     * and will post an error message "Please fill out all elements marked by a blue #"
     *
     * source: https://stackoverflow.com/questions/18495310/checking-if-an-input-field-is-required-using-jquery
     * -----------------------------------------------------------------------------
     */
     data_valid_form: function () {
        var valid = true; //begin with a valid value of true
        //var fail_log = ''; //begin with an empty fail log
        //var name; //create a name variable

        //search the_form for all elements that are of class "needForForm"
        $('.needForTable').each((i, e)=> {
            if (!$(e).val()) { //if there is not a value for this input
                valid = false; //change valid to false
                //name = $(e).attr('id'); //replace the name variable with the id attribute of this element
                //fail_log += name + " is required \n"; //add to the fail log that this name is required
            }
        });

        if (!valid) {
            $("#errorMsg").html("<span style='color:red; font-size:36px;'>Please fill out all elements marked by a</span><span style='color:blue; font-size:36px;'> blue #</span>");
        } else {
            $("#errorMsg").html("");
        }

        return valid;
    },

    /**
     * Run the supplied function if user presses OK
     * 
     * @param text The message to be displayed to the user. 
     * @param functionToCall Function to run if user pressed OK
     * 
     * If no text is provided, "Are you sure?" is used
     * Can supply a function with no parameters and no () after the name,
     * or an anonymous function using function(){} or ()=>{}
     * 
     * Nothing happens if cancel or "X" is pressed
     * 
     * Example:
     * my_widget_script.runIfConfirmed(
            "Do you want to run the function?", 
            ()=>{
                console.log("pretend delete function");
            }
        );
    */
    runIfConfirmed: function(text, functionToCall){
        var thisMessage = "Are you sure?";
        if(text){
            thisMessage = text;
        }
        bootbox.confirm({
            message: thisMessage,
            callback: (proceed)=>{
                if(proceed){
                    functionToCall()
                }
            }
        });
    },

    /**
     * Confirm with user
     * 
     * @param text The message to display to user
     * @param functionToCall Function to run, with the result (true/false) as a parameter
     * 
     * If no text is provided, "Do you wish to proceed?" is the default
     * Use an anonymous function, function(result){} or (result)=>{}. Then the function can use the result to decide what to do
     * 
     * Example:
     * my_widget_script.dialogConfirm(
            "Make a choice:", 
            (result)=>{ // arrow function, "this" still in context of button
                if(result){
                    console.log("You chose OK");
                } else {
                    console.log("You canceled or closed the dialog");
                }
            }
        );
        */
    dialogConfirm: function(text, functionToCall){
        var thisMessage = "Do you want to proceed?";
        if(text){
            thisMessage = text;
        }
        bootbox.confirm({
            message: thisMessage,
            callback: (result)=>{
                functionToCall(result);
            }
        })
    },

    /**
     * Get user input for a function
     * 
     * @param prompt Text to provide to the user
     * @param functionToCall Function to run, with the user input as a parameter
     * 
     * If no text is provided, "Enter value:" is used as default
     * Use an anonymous function, function(result){} or (result)=>{}. Then the function can use the result to decide what to do
     * 
     * Example:
     * my_widget_script.runBasedOnInput(
            "Enter a number from 0-10", (result)=>{
                if(result <= 10 && result >= 0){
                    console.log("You entered: " + result);
                } else {
                    console.log("You did not enter an appropriate value");
                }
            }
        );
        */ 
    runBasedOnInput: function(prompt, functionToCall){
        var thisTitle = "Enter value:"
        if(prompt){
            thisTitle = prompt;
        }
        bootbox.prompt({
            title: thisTitle,
            callback: (result)=>{
                functionToCall(result);
            }
        });
    },

    toggleCard: function ($cardHead) {
        // console.log($cardHead.next());
        $cardHead.next().toggleClass("collapse");
        $cardHead.next().find("textarea.autoAdjust").each((i,e)=> {
            if(! $(e).is(":hidden")) {
                e.setAttribute('style', 'height:' + (e.scrollHeight) + 'px;overflow-y:hidden;'); //add "display:inline-block"; if not working for ifOther textboxes in cards
            } 
        });
        my_widget_script.resize();
    },

    // ******************
    // Widget-specific 
    // ******************
    abNums: [],

    checkInArray: function (searchVal, array){
        var inArray = $.inArray(searchVal, array) !== -1;
        return inArray
    },

    dataSearch: function (dataName, dataValue) {
        var dataSearch = "[data-" + dataName + "='" + dataValue + "']";
        return dataSearch
    },

    abNumSearch: function (abNum) {
        var abSearch = this.dataSearch("abnum", abNum);
        return abSearch;
    },

    calcSearch: function (calc) {
        var calcSearch = this.dataSearch("calc", calc);
        return calcSearch;
    },

    watchSearch: function (watch) {
        var watchSearch = this.dataSearch("watch", watch);
        return watchSearch;
    },

    watchValue: function ($el) {
        var watch = $el.data("watch");
        var calcSearch = this.calcSearch(watch);
        var abNum = $el.data("abnum");
        
        var val = $el.val();

        // console.log("watch: " + watch + "; val: " + val);
        
        if(abNum){
            calcSearch += this.abNumSearch(abNum);
        }

        $(calcSearch).html(val);

        this.resize();
    },

    getHoursMin: function (timeString) {
        timeString = timeString.split(":");
        var hours = parseInt(timeString[0], 10), mins = parseInt(timeString[1], 10);
        return( 
            split = {
                hours: hours,
                mins: mins
            }
        )
    },

    watchTime: function ($elToWatch, $elToFill) {
        var addTime = $elToFill.data("time");
        // console.log(length);

        var startTime = $elToWatch.val();
        if(startTime){
            var time = new Date();
            startTimeSplit = my_widget_script.getHoursMin(startTime);
            addTimeSplit = my_widget_script.getHoursMin(addTime);
            // set start time
            time.setHours(startTimeSplit.hours, startTimeSplit.mins, 00, 000);
            time.setHours(time.getHours() + addTimeSplit.hours);
            time.setMinutes(time.getMinutes() + addTimeSplit.mins);
            console.log(time);
            $elToFill.text(time.toLocaleTimeString());
        } else{
            $elToFill.text("{Enter Start Time}")
        }

        my_widget_script.resize();
    },

    /**
     * @param dilFraction Dilution fraction for the item you're adding
     * @param desiredFinalVol Final volume of solution
     * 
     * returns the volume of the concentrated substance to be added
     * 
     * For example, for making 500 mL of 1x PBS using 10x PBS,
     * you would enter this.startVolOfDilutionCalc(0.1, 500)
     */
    startVolOfDilutionCalc: function(dilFraction, desiredFinalVol){
        var startVol = desiredFinalVol * dilFraction
        // console.log("startVol", startVol);
        // console.log("startVol rounded", +startVol.toFixed(2)); // the + gets rid of extra zeros
        return(startVol); // round when using (+startVol.toFixed(2))
    },

    // Return the amount of 10x PBS to use for making 1x PBS
    PBS10xTo1xCalc: function(desiredFinalVol){
        if(desiredFinalVol > 0){
            var dilFraction = 1/10;
            var startVol = +this.startVolOfDilutionCalc(dilFraction, desiredFinalVol).toFixed(2);
        } else {
            var startVol = "[Enter desired amount]"
        }
        return(startVol)
    },

    // Return the amount of normal goat serum, triton, and PBS for blocking solution
    // Default is 4% NGS and 0.4% triton
    blockingSolnCalc: function(){
        var desiredFinalVol = $("#desiredPBSTBlockVol").val();
        var percNGS = $("#percNGS").val();
        var percTriton = $("#percTriton").val();
        if(!(percNGS>0) || percNGS > 100){
            percNGS = 4;
            $("#percNGS").val(percNGS);
            this.watchValue($("#percNGS"));
        }
        if(!(percTriton>0) || percTriton > 100){
            percTriton = 0.4;
            $("#percTriton").val(0.4);
            this.watchValue($("#percTriton"));
        }
        var dilFractionNGS = percNGS/100;
        var dilFractionTriton = percTriton/100;
        if(desiredFinalVol > 0){
            // var dilFractionNGS = 0.04; // 4% NGS
            var startVolNGSmL = this.startVolOfDilutionCalc(dilFractionNGS, desiredFinalVol);
            var startVolNGSuL = +(startVolNGSmL * 1000).toFixed(2);
            // var dilFractionTriton = 0.004; // 0.4% triton
            var startVolTritonx100 = this.startVolOfDilutionCalc(dilFractionTriton, desiredFinalVol);
            var startVolTriton20percmL = startVolTritonx100 * 5;
            var startVolTriton20percuL = +(startVolTriton20percmL * 1000).toFixed(2);
            var startVolPBS = +(desiredFinalVol - startVolNGSmL - startVolTriton20percmL).toFixed(2);
        } else {
            var startVolNGSuL = "[Enter desired amount]"
            var startVolTriton20percuL = "[Enter desired amount]"
            var startVolPBS = "[Enter desired amount]"
        }
        solns = {
            NGS: startVolNGSuL,
            triton: startVolTriton20percuL,
            PBS: startVolPBS
        }
        $("#volNGSBlock").text(solns.NGS);
        $("#volTritonBlock").text(solns.triton);
        $("#volPBSBlock").text(solns.PBS);
        return(
            solns
        )
    },

    primaryAbSolnCalc: function(){
        var $primaryVol = $("#desiredPrimaryVol");
        var primaryVol = $primaryVol.val();

        if(primaryVol > 0){
            // For each dilution factor entry
            $(".abDilution").each((i,e)=>{
                var abNum = $(e).data("abnum");
                var abSearch = this.abNumSearch(abNum);
                var dilutionFactor = $(e).val();
                // If there's a value entered that's greater than 0
                if(dilutionFactor > 0){
                    // Convert to a proportion
                    var dilutionVal = 1/dilutionFactor;
                    // Get the volume in mL
                    var amountAb_mL = this.startVolOfDilutionCalc(dilutionVal, primaryVol);
                    // Convert to uL
                    var amountAb_uL = +(amountAb_mL * 1000).toFixed(2);
                } else{
                    var amountAb_uL = "[Enter dilution factor]"
                }
                // Fill in the amount for the abnum matches
                $(".abAmount"+abSearch).text(amountAb_uL);
            });
        } else{
            primaryVol = "[Enter desired volume]";
            $(".abDilution").each((i,e)=>{
                var abNum = $(e).data("abnum");
                var abSearch = this.abNumSearch(abNum);
                $(".abAmount"+abSearch).text("[Enter desired volume]");
            });
        }
        $("#volBlockingForPrimary").text(primaryVol);
    },

    addAntibodyClick: function (){
        var abNum = 1;
        if(this.abNums.length > 0){
            var lastAb = this.abNums[this.abNums.length - 1];
            // console.log("lastAb: " + lastAb);
            abNum = lastAb + 1;
        }

        var inArray = this.checkInArray(abNum, this.abNums);
        if(! inArray){
            this.addAntibodies(abNum);
        }
    },

    addCRHcFosABsClick: function (){
        var abNum = 1;
        if(this.abNums.length > 0){
            var lastAb = this.abNums[this.abNums.length - 1];
            // console.log("lastAb: " + lastAb);
            abNum = lastAb + 1;
        }

        // Make an antibody for the rabbit anti-cFos
        var inArray = this.checkInArray(abNum, this.abNums);
        if(! inArray){
            this.addAntibodies(abNum);
        }
        
        // Fill in the information
        var abSearch = this.abNumSearch(abNum);
        $(".abName"+abSearch).val("rabbit anti-cFos");
        var calcSearch = this.calcSearch("abName");
        $(calcSearch + abSearch).text("rabbit anti-cFos");
        $(".abDilution"+abSearch).val("2000");

        // Go to the next antibody number
        abNum++;

        // Make it
        var inArray = this.checkInArray(abNum, this.abNums);
        if(! inArray){
            this.addAntibodies(abNum);
        }
        
        // Fill in the info
        var abSearch = this.abNumSearch(abNum);
        $(".abName"+abSearch).val("chicken anti-GFP");
        var calcSearch = this.calcSearch("abName");
        $(calcSearch + abSearch).text("chicken anti-GFP");
        $(".abDilution"+abSearch).val("1000");

        // Update the calculation
        this.primaryAbSolnCalc();
    },

    addAntibodies: function(abNum){
        this.abNums.push(abNum);

        var myLeftCol = "col-4 col-sm-5 col-md-4 col-lg-5 text-right"

        $("#abInfo").append(
            $("<div></div>", {
                "class": "row mt-2", 
                "data-abnum": abNum
            }).append(
                $("<h4></h4>", {
                    "class": "col",
                    "data-abnum": abNum,
                    "data-calc": "abName"
                }).append("Antibody " + abNum)
            ).append(
                $("<div></div>", {
                    "class": "col"
                }).append(
                    $("<input></input>", {
                        "type": "button",
                        "data-abnum": abNum,
                        "value": "Delete antibody",
                        name: "deleteab"+abNum,
                        id: "deleteAb"+abNum,
                        "class": "col fullWidth deleteAb hideView"
                    }).on("click", (e)=>{
                        this.deleteAb(abNum)
                    })
                )
            )
        ).append(
            $("<div></div>", {
                "class": "row",
                "data-abnum": abNum
            }).append(
                "<div class='"+myLeftCol+"'>Antibody name</div>"
            ).append(
                $("<div></div>", {
                    "class": "col"
                }).append(
                    $("<input></input>", {
                        "class": "fullWidth abName watch", 
                        type: "text",
                        "name": "abname"+abNum,
                        "id": "abName"+abNum,
                        "data-abnum": abNum,
                        "data-watch": "abName",
                        "value": "Ab " + abNum
                    })
                )
            )
        ).append(
            $("<div></div>", {
                "class": "row",
                "data-abnum": abNum
            }).append(
                "<div class='"+myLeftCol+"'>Antibody dilution (1:x)</div>"
            ).append(
                $("<div></div>", {
                    "class": "col"
                }).append(
                    $("<input></input>", {
                        "class": "fullWidth abDilution", 
                        type: "number",
                        "name": "abdilution"+abNum,
                        "id": "abDilution"+abNum,
                        "data-abnum": abNum
                    })
                ).on("input", (e)=>{
                    this.primaryAbSolnCalc();
                })
            )
        );

        $("#abAmountInfo").append(
            $("<div></div>", {
                "class": "row",
                "data-abnum": abNum
            }).append(
                $("<div></div>", {
                    "class": "green " + myLeftCol,
                }).append(
                    $("<span></span>", {
                        "class": "abAmount",
                        "data-abnum": abNum
                    })
                ).append(" &micro;L")
            ).append(
                $("<div></div>", {
                    "class": "col",
                    "data-abnum": abNum,
                    "data-calc": "abName"
                })
            )
        );

        $("#abInfo").find(".watch").each((i,e)=> { 
            this.watchValue($(e));
        }).on("input", (e)=>{
            this.watchValue($(e.target)); // or currentTarget
        });
    },

    deleteAb: function (abNum){
        this.runIfConfirmed(
            "Are you sure that you wish to delete this antibody?",
            ()=>{
                var search = this.abNumSearch(abNum);
                $(search).remove(); 
                
                var index = this.abNums.indexOf(abNum);
                if(index > -1){
                    this.abNums.splice(index, 1);
                }
            }
        )
    },
};

//**************************************************************************
//End of your code
//**************************************************************************
//**************************************************************************
      //the parent class functionality is added to your class below.
      form_script.parent_class = parent_form_script;
      //**************************************************************************
      //**************************************************************************
      //call to the init function in your script.  Note that you can change the mode in the call here.
      //your choices are view,view_dev,edit,edit_dev,  see the parent class source for details
      form_script.init("edit", function() {return form_script.test_data()});


    }
)

}
catch (e) {

}

parent_form_script.wiget_version_info ={"version":20,"created":"2020-12-29T22:00:23-05:00","last_modified_at":"2021-01-03T18:51:34-05:00","last_modified_by":"Amanda Gibson","owned_by":"unknown"};

</script>
<form id="the_form" style="display:table">
<!------------------------------------------------------------------------------------------>
<!--the html for your tool goes here.  Paste it into the LA dev tool when you have it the way you want it-->
<!------------------------------------------------------------------------------------------>
<!-- #region HTML -->
<!-- Bootstrap CSS -->
<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet" />
<!-- Load jQuery for Bootstrap -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!-- Load bootstrap java -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous">
</script>
<!-- Bootbox for dialogs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.min.js" integrity="sha512-RdSPYh1WA6BF0RhpisYJVYkOyTzK4HwofJ3Q7ivt/jkpW6Vc8AurL1R+4AUcvn9IwEKAPm/fk7qFZW3OuiUDeg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Call no conflict to reassign this newer jQuery off of $ and jquery-->
<script>
    var $jq351 = jQuery.noConflict(true);
</script>
<style type="text/css">
    /* TO DO Place css styling code here */

    /* responsive table doesn't work with xs screen sizes for some reason, so apply a specific width for these */
    @media (max-width: 576px) {
        .xsTableDiv {
            width: 300px !important;
            overflow-x: scroll;
        }
    }

    table {
        border: 2px solid black;
    }

    th {
        padding: 5px;
        border: 2px solid black;
    }

    td {
        padding: 5px;
        border: 1px solid black;
    }

    .fullWidth {
        width: 90%
    }

    .green{
        color: green;
    }

    .bottomLine{
        border-bottom: 2px solid black;
    }

    .blue{
        color: blue;
    }

    .orange{
        color: orange;
    }

    .lightBlue{
        color: rgb(77, 167, 246);
    }

    .red{
        color: red;
    }

    .purple{
        color: purple;
    }

    ul {
        margin-left: 0;
        padding-left: 20px;
    }
</style>

<!-- TO DO Begin typing your HTML code here -->
<div class="container hideView">
    <p>Elements that are required to save this page are marked with a red asterisk <span
            style="color:red">*</span></p>
</div>

<div class="container">
    <div class="row">
        <!-- PBS Card -->
        <div class="col-12 col-lg-6">
            <div class="card">
                <button class="card-header" type="button">
                    1x PBS
                </button>
                <div class="card-body container collapse">
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol green">50 mL</div>
                        <div class="col">10x PBS</div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol bottomLine">
                            <div class="row">
                                <div class="col-2 text-left">
                                    +
                                </div>
                                <div class="col green">450 mL</div>
                            </div>
                        </div>
                        <div class="col">H<sub>2</sub>O <em>use milliQ water and fill to 500 mL </em></div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol">500 mL</div>
                        <div class="col"><strong>total</strong></div>
                    </div>
                    <div class="row mt-2 align-items-end">
                        <div class="myLeftCol2">
                            <input type="date" name="pbs1xdate" id="pbs1xDate">
                        </div>
                        <div class="col">Date</div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <strong>Alternate Amount:</strong><br/>
                        </div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol">
                            <input type="number" name="desiredpbsvol" id="desiredPBSVol" class="fullWidth">
                        </div>
                        <div class="col">Desired 1x PBS final volume (mL)</div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol green"><span id="vol10xPBS">[Enter desired amount]</span> mL</div>
                        <div class="col">Amount of 10x PBS to add</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Blocking Solution -->
        <div class="col-12 col-lg-6">
            <div class="card">
                <button class="card-header" type="button">
                    PBS + <span data-calc="percNGS">4</span>% Normal Goat Serum + <span data-calc="percTriton">0.4</span>% Triton
                </button>
                <div class="card-body container collapse">
                    <div class="row font-italic">
                        Prepare a solution of TritonX100 at 20% dilution 1:5 (8mL Triton + 32mL PBS 1X). You can keep it for a very long time at 4&deg;C.
                        Diluted triton is easier to use as it is a sticky detergent
                    </div>
                    <div class="row mt-2 align-items-end">
                        <div class="myLeftCol2">
                            <input type="date" name="pbs1xdate" id="pbs1xDate">
                        </div>
                        <div class="col">Date</div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <strong>Percentages:</strong>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="myLeftCol">
                            <input type="number" name="percngs" id="percNGS" class="fullWidth updateBlocking watch" data-watch="percNGS" value="4" min="0" max="100"/>
                        </div>
                        <div class="col">
                            % normal goat serum
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="myLeftCol">
                            <input type="number" name="perctriton" id="percTriton" class="fullWidth updateBlocking watch" data-watch="percTriton" value="0.4" min="0" max="100" step="0.1"/>
                        </div>
                        <div class="col">
                            % triton
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <strong>Desired Amount:</strong><br/>
                        </div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol">
                            <input type="number" name="desiredpbstblockvol" id="desiredPBSTBlockVol" class="fullWidth updateBlocking watch" data-watch="blockVol" value="30">
                        </div>
                        <div class="col">Desired blocking solution volume (mL)</div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol green"><span id="volNGSBlock">[Enter desired amount]</span> &micro;L</div>
                        <div class="col">Normal goat serum <em>aliquots in freezer</em></div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol green"><span id="volTritonBlock">[Enter desired amount]</span> &micro;L</div>
                        <div class="col">20% triton</div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol bottomLine">
                            <div class="row">
                                <div class="col-2 text-left">
                                    +
                                </div>
                                <div class="col green"><span id="volPBSBlock">[Enter desired amount]</span> mL</div>
                            </div>
                        </div>
                        <div class="col">PBS 1x</div>
                    </div>

                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol"><span data-calc="blockVol">[Enter desired amount]</span> mL</div>
                        <div class="col"><strong>total</strong></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Primary -->
        <div class="col-12 col-lg-6">
            <div class="card">
                <button class="card-header" type="button">
                    Primary Antibody Solution
                </button>
                <div class="card-body container collapse">
                    <div class="row">
                        <div class="col">
                            <strong>Prepare in  blocking solution (PBS + triton + NGS)</strong>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="myLeftCol2">
                            <input type="date" name="primarydate" id="primaryDate">
                        </div>
                        <div class="col">Date</div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <strong>Amounts:</strong><br/>
                        </div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol">
                            <input type="number" name="desiredprimaryvol" id="desiredPrimaryVol" class="fullWidth">
                        </div>
                        <div class="col">Desired primary antibody solution volume (mL)</div>
                    </div>
                    <div class="row mt-2 align-items-start">
                        <div class="myLeftCol green"><span id="volBlockingForPrimary">[Enter desired amount]</span> mL</div>
                        <div class="col">Amount of blocking solution to use</div>
                    </div>
                    <div id="abAmountInfo">&nbsp;</div>
                    <div class="row mt-2 hideView">
                        <div class="col"><input type="button" value="Add Antibody" id="addAntibody" name="addantibody" class="fullWidth disableOnView"></div>
                    </div>
                    <div class="row mt-2 hideView">
                        <div class="col"><input type="button" value="Add CRH cFos Study ABs" id="addCRHcFosABs" name="addcrhcfosabs" class="fullWidth disableOnView"></div>
                    </div>
                    <div id="abInfo">&nbsp;</div>
                    <div class="row mt-2 font-italic">
                        <div class="col">
                            To find where your AB is stored (4&deg;C, -20&deg;C, -80&deg;C), look at the IHC folder in the IHC drawer<br/>
                        </div>
                    </div>  
                    <div class="row mt-2">
                        <div class="col font-italic">
                            Tips: To prepare less primary AB, you can transer the slices from basket to the well (3 mL of AB in a well of 6well plate is enough,
                            vs 7mL minimum when you use the basket)
                            or, use a 24-well plate with 500&micro;L per well<br/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-2">
    <div class="row">
        <h3 class="col">Day 1:</h3>
    </div>
    <div class="row">
        <div class="col">
            Free-floating sections are stored in anti-freeze solution (cryoprotectant)<br/>
            Gently shake for all incubation steps unless otherwise indicated
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol3">1. <input type="checkbox" name="step1" id="step1"/></div>
        <div class="col">
            Remove slices from freezer and transfer them into a basket (cell strainer), inside a 6-well plate, filled with <span class="lightBlue">PBS 1x</span><br/>
            Label baskets and plate cover
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol3">2. <input type="checkbox" name="step2" id="step2"/></div>
        <div class="col">
            Wash sections <span class="blue">3X for 10 min</span> on shaker with <span class="lightBlue">PBS 1x</span>
        </div>
    </div>
    <div class="row">
        <div class="myLeftCol4"><input type="time" name="rinsetime1" id="rinseTime1" class="watchTime fullWidth"></div>
        <div class="col">
            Wash 1 complete at <span class="fillTime purple" data-time="00:10">{Enter Start Time}</span>
        </div>
    </div>
    <div class="row">
        <div class="myLeftCol4"><input type="time" name="rinsetime2" id="rinseTime2" class="watchTime fullWidth"></div>
        <div class="col">
            Wash 2 complete at <span class="fillTime purple" data-time="00:10">{Enter Start Time}</span>
        </div>
    </div>
    <div class="row">
        <div class="myLeftCol4"><input type="time" name="rinsetime3" id="rinseTime3" class="watchTime fullWidth"></div>
        <div class="col">
            Wash 3 complete at <span class="fillTime purple" data-time="00:10">{Enter Start Time}</span>
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol3">3. <input type="checkbox" name="step3" id="step3"/></div>
        <div class="col">
            Incubate the slices in 24-well plate with <span class="green">500 &micro;L</span> of 
            <span class="lightBlue">blocking solution</span> <em>(see PBS + <span data-calc="percNGS">4</span>% NGS + <span data-calc="percTriton">0.4</span>% triton above)</em>
            for <span class="blue">1 hr</span> at RT
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol4"><input type="time" name="blockingtime" id="blockingtime" class="watchTime fullWidth"></div>
        <div class="col">
            Blocking complete at <span class="fillTime purple" data-time="01:00">{Enter Start Time}</span>
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol3">4. <input type="checkbox" name="step4" id="step4"/></div>
        <div class="col">
            Incubate slices in 24-well plate with 500 &micro;L <span class="lightBlue">primary antibody</span>
            diluted in the blocking solution (see above)<br/>
            <div class="mt-1 font-italic">
                You can leave the primary for several nights, but try to be consistent. Ideally, have control and treatment groups done at the same time,
                as the quality of IHC may vary, you don't want to do only one type of treatment on one day
                and only another type on another day
            </div>
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol4">
            <input type="date" name="startdate" id="startDate" class="fullWidth">
        </div>
        <div class="col">
            Start Date
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol4">
            <input type="time" name="starttime" id="startTime" class="fullWidth">
        </div>
        <div class="col">
            Start Time
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol4">
            <input type="date" name="enddate" id="endDate" class="fullWidth">
        </div>
        <div class="col">
            End Date
        </div>
    </div>
    <div class="row mt-2">
        <div class="myLeftCol4">
            <input type="time" name="endtime" id="endTime" class="fullWidth">
        </div>
        <div class="col">
            End Time
        </div>
    </div>
</div>
<!-- #endregion -->
<!------------------------------------------------------------------------------------------>
<!--end of your code-->
<!------------------------------------------------------------------------------------------>

</form>
</body>
</html>